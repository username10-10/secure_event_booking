{% extends "base.html" %}

{% block title %}Events{% endblock %}

{% block content %}
<h2>ðŸŽ« Upcoming Events</h2>

{% if user.is_staff %}
<p><a class="btn" href="{% url 'event_create' %}">âž• Create Event</a></p>
{% endif %}

<table style="width:100%; border-collapse: collapse;">
    <thead>
        <tr>
            <th>Title</th>
            <th>Date</th>
            <th>Location</th>
            <th>Available Seats</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for event in events %}
        <tr style="border-bottom:1px solid #ddd;">
            <td>{{ event.title }}</td>
            <td>{{ event.date }}</td>
            <td>{{ event.location }}</td>
            <td>{{ event.available_seats }}</td>
            <td>
                {% if event.available_seats > 0 %}
                <a class="btn" href="{% url 'book_event' event.id %}">Book</a>
                {% else %}
                <span>Full</span>
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">No events available.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
